{"version":3,"sources":["components/search/SearchPage.js","api/ArtistApi.js","services/ArtistService.js","components/artist/ArtistPage.js","api/SongApi.js","services/SongService.js","components/search/SearchBar.js","components/search/SearchingPage.js","App.js","reportWebVitals.js","index.js"],"names":["SearchPage","props","history","useHistory","className","id","type","placeholder","aria-label","aria-describedby","onFocus","push","ArtistApi","client","this","search","query","gql","ArtistService","a","results","data","artists","ArtistPage","useState","songs","setSongs","artist","setArtist","useEffect","params","URLSearchParams","location","artistId","get","songService","getSongs","then","words","map","song","index","text","title","value","word","popularity","length","catch","error","console","style","width","height","window","innerHeight","options","layout","scale","rotations","rotationAngles","enableTooltip","SongApi","top","SongService","numberOfSongs","result","SearchBar","setArtists","goToArtistPage","name","onKeyDown","event","key","target","artistService","find","autoFocus","tabIndex","onClick","onKeyPress","e","SearchingPage","App","ApolloClient","link","HttpLink","uri","cache","InMemoryCache","init","basename","exact","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.771d6ee1.chunk.js","sourcesContent":["import {Search} from \"react-bootstrap-icons\";\nimport {useHistory} from \"react-router-dom\";\n\nexport default function SearchPage(props) {\n\n    const history = useHistory();\n\n    return (\n        <div className=\"App\">\n            <header className=\"App-header\">\n                <h1>Tune Cloud</h1>\n                <div className=\"input-group w-50\">\n                    <span className=\"input-group-text\" id=\"basic-addon1\">\n                        <Search />\n                    </span>\n                    <input type=\"text\" className=\"form-control\" placeholder=\"Search for an artist\"\n                           aria-label=\"Input group example\" aria-describedby=\"basic-addon1\"\n                           onFocus={()=>history.push('/search')}\n                    />\n                </div>\n            </header>\n        </div>\n    );\n}\n","import {gql} from \"@apollo/client\";\n\nexport default class ArtistApi {\n    static client;\n\n    static init(client) {\n        this.client = client;\n    }\n\n    static search(search) {\n        const query = gql`query {\n            artists(search: \"${search}\") {\n                id\n                name\n            }\n        }`;\n        return this.client.query({query: query});\n    }\n}\n","import ArtistApi from \"../api/ArtistApi\";\n\nexport default class ArtistService {\n    async find(search) {\n        const results = await ArtistApi.search(search);\n        return results.data.artists;\n    }\n}\n","import {useEffect, useState} from \"react\";\nimport ReactWordcloud from 'react-wordcloud';\n\nexport default function ArtistPage(props) {\n\n    const MAX_SONG_TITLE_LENGTH = 30;\n    const MIN_FONT_SIZE = 12;\n    const MAX_FONT_SIZE = 100;\n    const NUMBER_OF_SONGS = 100;\n    const [songs, setSongs] = useState([]);\n    const [artist, setArtist] = useState();\n    const options = {\n        layout: 'spiral',\n        scale: 'linear',\n        rotations: 3,\n        rotationAngles: [0, 90],\n        enableTooltip: false\n    };\n\n    const calculateWordValue = ((word, popularity)=>{\n        if (word.length > MAX_SONG_TITLE_LENGTH) {\n            return MIN_FONT_SIZE;\n        } else {\n            return MAX_FONT_SIZE - popularity;\n        }\n    });\n\n    useEffect( ()=>{\n        const params = new URLSearchParams(props.location.search);\n        const artistId = params.get('artistId');\n        setArtist(params.get('artist'));\n        props.songService.getSongs(artistId, NUMBER_OF_SONGS).then((results)=>{\n            const words = results.map((song, index) => {\n                return {text: song.title, value: calculateWordValue(song.title, index)}\n            });\n            setSongs(words);\n        }).catch((error) => {\n            console.error(error);\n        });\n    }, [props.location.search, props.songService]);\n\n    return(\n        <div className='App' style={{width: '100%', height: window.innerHeight}}>\n                    <h1 className='artist-header'>{artist}</h1>\n                    <ReactWordcloud words={songs} options={options}/>\n        </div>);\n};\n","import {gql} from \"@apollo/client\";\n\nexport default class SongApi {\n    static client;\n\n    static init(client) {\n        this.client = client;\n    }\n\n    static getSongs(artistId, top) {\n        const query = gql`query {\n            songs(artistId: ${artistId}, top: ${top}, filter: {\n                artists: [${artistId}]\n            }) {\n                id\n                title\n                artist {\n                    id\n                    name\n                }\n            }\n        }`;\n        return this.client.query({query: query});\n    }\n}\n","import SongApi from \"../api/SongApi\";\n\nexport default class SongService {\n    async getSongs(artistId, numberOfSongs) {\n        const result = await SongApi.getSongs(artistId, numberOfSongs);\n        return result.data.songs;\n    }\n}\n","import { Search } from 'react-bootstrap-icons';\nimport {Fragment, useState} from 'react';\nimport {useHistory} from 'react-router-dom';\n\nexport default function SearchBar(props) {\n\n    const [artists, setArtists] = useState([]);\n    const history = useHistory();\n\n    const searchBarKeyPress = (event) => {\n        if (event.key === 'Enter' || event.target.value.length >= 4) {\n            const search = event.target.value;\n            props.artistService.find(search).then((results)=>{\n                setArtists(results);\n            }).catch((error)=>{\n                console.error(error);\n            });\n        }\n    }\n\n    const goToArtistPage = (artist) => {\n        history.push(`/artist?artistId=${artist.id}&artist=${artist.name}`);\n    }\n\n    return (\n        <Fragment>\n            <div className=\"input-group\">\n                    <span className=\"input-group-text\" id=\"basic-addon1\">\n                        <Search />\n                    </span>\n                <input type=\"text\" className=\"form-control\" placeholder=\"Search for an artist\"\n                       aria-label=\"Input group example\" aria-describedby=\"basic-addon1\"\n                       onKeyDown={searchBarKeyPress} autoFocus\n                />\n            </div>\n\n            <ul className=\"list-group search-results\">\n                {\n                    artists.map((artist)=>{\n                        return <li className=\"list-group-item\" tabIndex='0' key={artist.id}\n                                   onClick={()=>goToArtistPage(artist)}\n                                   onKeyPress={(e) => e.key === 'Enter' ? goToArtistPage(artist) : null}>{artist.name}</li>\n                    })\n                }\n            </ul>\n        </Fragment>\n    );\n}\n","import SearchBar from \"./SearchBar\";\n\nexport default function SearchingPage(props) {\n    return (\n        <SearchBar {...props} />\n    );\n}\n","import {HashRouter, Route} from 'react-router-dom';\nimport './App.css';\nimport SearchPage from \"./components/search/SearchPage\";\nimport ArtistApi from \"./api/ArtistApi\";\nimport {ApolloClient, HttpLink, InMemoryCache} from \"@apollo/client\";\nimport ArtistService from \"./services/ArtistService\";\nimport ArtistPage from \"./components/artist/ArtistPage\";\nimport SongService from \"./services/SongService\";\nimport SongApi from \"./api/SongApi\";\nimport SearchingPage from \"./components/search/SearchingPage\";\n\n\n\nfunction App() {\n    const client = new ApolloClient({\n        link: new HttpLink({uri: 'https://nbl977s1aj.execute-api.us-east-1.amazonaws.com/dev/graphql'}),\n        cache: new InMemoryCache(),\n    });\n\n    ArtistApi.init(client);\n    SongApi.init(client);\n\n    const artistService = new ArtistService();\n    const songService = new SongService();\n\n    return (\n        <HashRouter basename='/'>\n            <Route exact path='/' component={()=><SearchPage artistService={artistService} />} />\n            <Route path='/search' component={()=><SearchingPage artistService={artistService} />} />\n            <Route path='/artist' component={(props)=><ArtistPage songService={songService} {...props} />} />\n        </HashRouter>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}